import{a as o}from"./chunk-EI7MMDWY.js";import{DurableObject as h}from"cloudflare:workers";var i=class extends h{static{o(this,"UserDO")}constructor(t,e){this.state=t,this.env=e}async read(t){return await this.state.storage.get(t)}async write(t,e){return await this.state.storage.put(t,e),e}async delete(t){return await this.state.storage.delete(t),!0}};var l=new Set(["fi","sv","en"]),u="en",m="services";function w(r){if(!r)return u;let t=r.split(",");for(let e=0,a=t.length;e<a;e++){let s=t[e].trim().split(";",1)[0].split("-",1)[0];if(l.has(s))return s}return u}o(w,"negotiateLanguage");var S={async fetch(r,t){let a=new URL(r.url).pathname,s=a.split("/"),c=s[1]||"";if(c===m){let{forwardRequestToServicesRouter:f}=await import("./servicesRouter-XG3YY6TK.js");return f(r,t,s)}let n=c,g=a;l.has(n)||(n=w(r.headers.get("Accept-Language")),g=`/${n}${a}`);let{forwardRequestToPagesRouter:p}=await import("./pagesRouter-42J6J5QM.js");return p(r,t,n,s)}};export{i as UserDO,S as default};
