import{a as r}from"./chunk-EI7MMDWY.js";var u=new Set(["read","write","delete"]),y={user:r(()=>import("./userService-NSA4OC2G.js"),"user"),order:r(()=>import("./orderService-SHF3XPGV.js"),"order")};async function f(s,d,l){let[,,n,e]=l;if(!u.has(n))return new Response(JSON.stringify({error:`Unsupported operation: ${n}`}),{status:400,headers:{"Content-Type":"application/json"}});let o=y[e];if(!o)return new Response(JSON.stringify({error:`Service not found: ${e}`}),{status:404,headers:{"Content-Type":"application/json"}});let a;try{a=await s.json()}catch{return new Response(JSON.stringify({error:"Invalid JSON payload"}),{status:400,headers:{"Content-Type":"application/json"}})}let i;try{i=await o()}catch{return new Response(JSON.stringify({error:`Failed to load service: ${e}`}),{status:500,headers:{"Content-Type":"application/json"}})}let p=`${n}${e.charAt(0).toUpperCase()+e.slice(1)}`,c=i[p];if(typeof c!="function")return new Response(JSON.stringify({error:`Handler not implemented: ${p}`}),{status:501,headers:{"Content-Type":"application/json"}});try{let t=await c(a,{request:s,env:d});return new Response(JSON.stringify(t),{status:200,headers:{"Content-Type":"application/json"}})}catch(t){return new Response(JSON.stringify({error:t.message||"Internal service error"}),{status:500,headers:{"Content-Type":"application/json"}})}}r(f,"forwardRequestToServicesRouter");export{f as forwardRequestToServicesRouter};
